extends layout

include ad-billboard
  .googlead.billboard
    img(src="http://via.placeholder.com/970x250", alt="billboard")

include ad-leaderboard
  .googlead.leaderboard
    img(src="http://via.placeholder.com/728x90", alt="billboard")

+excerpt

block latest-news
  section.latest-news
    .layout
      .section-label
        div
          h3 Latest News
        div
        div
        div
        a(href="/viewall").view view all
      .grid-container
        - var count = 0;
        each news in contentful.posts
          if  count < 8 
            .grid-item
              .image-container
                a(href= news._url)
                  img(src=asset(news.image))
              .copy-container
                .headline-container
                  a(href= news._url)
                    h4.headline= news.title
                .author-container
                  if news.author
                    h4.author By: 
                      i.author #{news.author[0].fields.name}
                  else
                    h4.author By: 
                      i.author Access team
                  p.date= news.date
          - count++;
        .grid-item-mpu
          include ad-mpu

block features
  section.features
    .layout
      .section-label
        div
          h3 Features
        div
        div
        div
        a(href="/viewall").view view all
      .grid-container
        - var count = 0;
        each features in contentful.features
          if  count < 5 
            .grid-item(class="item-no-#{ count }")
              .image-container
                a(href= features._url)
                  img(src=asset(features.image))
              .copy-container
                .headline-container
                  a(href= features._url)
                    h4.headline= features.title
                .author-container
                  if features.author
                    h4.author By: 
                      i.author #{features.author[0].fields.name}
                  else
                    h4.author By: 
                      i.author Access team
                  p.date= features.date
          - count++;

block blogs
  section.blogs
    .layout
      .section-label
        div
          h3 Blogs
        div
        div
        div
        a(href="/viewall").view view all
      .grid-container
        - var count = 0;
        each blogPost in contentful.blogPost
          if  count < 6 
            .grid-item(class="item-no-#{ count }")
              .image-container
                a(href= blogPost._url)
                  img(src=asset(blogPost.image))
              if blogPost.author
                .author-portrait-container
                  img.author-portrait(src=asset(blogPost.author[0].fields.portrait))
              .copy-container
                .headline-container
                  a(href= blogPost._url)
                    h4.headline= blogPost.title
                .author-container
                  if blogPost.author
                    h4.author By: 
                      i.author #{blogPost.author[0].fields.name}
                  else
                    h4.author By: 
                      i.author Access team
                  p.date= blogPost.date
          - count++;




     

        //- ul
        //-   - for news in contentful.posts
        //-     li
        //-       h4= news.title
        //-       //- Find out if the post has an author. This sits in an array due to the many to many relationship set up in contentful
        //-       if news.author
        //-         h4 #{news.author[0].fields.name}
        //-         img(src=asset(news.author[0].fields.portrait))
        //-         h4: a(href= news.author[0]._url)= "Bio"
        //-       else
        //-         h4 No Author specified
        //-       p= news.date 
        //-       img(src=asset(news.image))
        //-       //- != marked(news.body)
        //-       h4: a(href= news._url)= "Read More"

  //- for news in contentful.posts
  //-   div!= JSON.stringify(news)